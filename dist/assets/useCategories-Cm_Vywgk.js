import{u as m,a as n}from"./useMutation-CjuJ8xHN.js";import{n as l,s}from"./index-CzubCIAQ.js";async function f(){const{data:r,error:a}=await s.from("categories").select("*, products(count)").order("created_at",{ascending:!0});if(a)throw new Error(a.message);return r||[]}function p(){const r=l(),{data:a,isLoading:u,error:c}=m({queryKey:["categories"],queryFn:f}),g=n({mutationFn:async t=>{const{data:e,error:o}=await s.from("categories").insert(t).select().single();if(o)throw new Error(o.message);return e},onSuccess:()=>{r.invalidateQueries({queryKey:["categories"]})}}),y=n({mutationFn:async({id:t,updatedFields:e})=>{const{data:o,error:i}=await s.from("categories").update(e).eq("id",t).select().single();if(i)throw new Error(i.message);return o},onSuccess:()=>{r.invalidateQueries({queryKey:["categories"]})}}),d=n({mutationFn:async t=>{const{error:e}=await s.from("categories").delete().eq("id",t);if(e)throw new Error(e.message)},onSuccess:()=>{r.invalidateQueries({queryKey:["categories"]})}});return{categories:a,isLoading:u,error:c,addCategory:g.mutateAsync,updateCategory:y.mutateAsync,deleteCategory:d.mutateAsync}}export{p as u};
