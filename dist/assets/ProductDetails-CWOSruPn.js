import{u as _,b as w,r as g,j as e,a as P,L as n}from"./index-DJa8JmTm.js";import{T as o,H as m,F as x,M as C}from"./Footer-BGvRZbxI.js";import{P as F}from"./ProductCard-C6yhs7kG.js";import{B as S}from"./button-DQkp_F6k.js";import{c as k,d as A}from"./useProducts-T2pr3msx.js";import{C as u}from"./chevron-left-Bv7kFfeV.js";import{P as B}from"./plus-BDCGZCab.js";import{S as L}from"./shopping-cart-Dqs4meVC.js";import"./phone-BCYrnSCU.js";import"./input-CNvN4VzI.js";import"./useCategories-CEjqWL0Z.js";import"./useMutation-wRGvQ37d.js";import"./trash-2-DCfUe7bk.js";import"./search-CWP1OLDI.js";import"./menu-DEdQtXwr.js";import"./chevron-down-Dn-4MBn6.js";import"./map-pin-DSo7UTKA.js";import"./mail-CP9QOdLy.js";const Y=()=>{const{id:p}=_(),{addItem:j}=w(),[t,l]=g.useState(1),[i,N]=g.useState(null),{data:s,isLoading:b}=k(p),{data:y}=A(),h=(y?.data||[]).filter(r=>r.category_id===s?.category_id&&r.id!==p).slice(0,4),c=s?.has_weight_options&&s.weights&&s.weights.length>0,a=c?s.weights?.find(r=>r.id===i):null,f=a?a.price:s?.price||0;if(b)return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(o,{}),e.jsx(m,{}),e.jsx("main",{className:"flex-1 flex items-center justify-center",children:e.jsx(P,{className:"w-8 h-8 animate-spin text-primary"})}),e.jsx(x,{})]});if(!s)return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(o,{}),e.jsx(m,{}),e.jsx("main",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-arabic-display mb-4",children:"المنتج غير موجود"}),e.jsx(n,{to:"/",className:"text-primary hover:underline font-body",children:"العودة للرئيسية"})]})}),e.jsx(x,{})]});const v=()=>{const r={id:s.id,nameAr:s.name_ar||"",nameFr:s.name_fr,price:f,originalPrice:s.original_price||void 0,image:s.image||"/placeholder.svg",category:s.category?.name_fr||"",descriptionAr:s.description_ar||"",isNew:s.is_new||!1,isPromo:s.is_promo||!1,isBestSeller:s.is_best_seller||!1,isFeatured:s.is_featured||!1},d=a?{id:a.id,weight:a.weight,price:a.price}:void 0;j(r,t,d),l(1)};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(o,{}),e.jsx(m,{}),e.jsxs("main",{className:"flex-1",children:[e.jsx("div",{className:"bg-muted/50 py-3",children:e.jsx("div",{className:"container",children:e.jsxs("nav",{className:"flex items-center gap-2 text-sm font-body text-muted-foreground",children:[e.jsx(n,{to:"/",className:"hover:text-primary transition-colors",children:"الرئيسية"}),e.jsx(u,{className:"w-4 h-4"}),s.category&&e.jsxs(e.Fragment,{children:[e.jsx(n,{to:`/category/${s.category_id}`,className:"hover:text-primary transition-colors",children:s.category.name_ar}),e.jsx(u,{className:"w-4 h-4"})]}),e.jsx("span",{className:"text-foreground",children:s.name_ar||""}),"            "]})})}),e.jsx("section",{className:"py-8 md:py-12",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 md:gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-muted",children:e.jsx("img",{src:s.image||"/placeholder.svg",alt:s.name_ar||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.is_new&&e.jsx("span",{className:"badge-new",children:"جديد"}),s.is_promo&&e.jsx("span",{className:"badge-promo",children:"عرض خاص"}),s.is_best_seller&&e.jsx("span",{className:"bg-secondary text-secondary-foreground px-3 py-1 text-sm font-medium rounded-full",children:"الأكثر مبيعاً"}),s.is_featured&&e.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 text-sm font-medium rounded-full",children:"منتج مميز"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-arabic-display font-bold text-secondary mb-2",children:s.name_ar||""}),e.jsx("p",{className:"text-lg font-french text-muted-foreground",children:s.name_fr})]}),e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsxs("span",{className:"text-3xl font-bold text-primary",dir:"ltr",children:[f," د.ج"]}),s.original_price&&!a&&e.jsxs("span",{className:"text-xl text-muted-foreground line-through",dir:"ltr",children:[s.original_price," د.ج"]}),e.jsxs("span",{className:"text-muted-foreground",children:["/ ",a?.weight]})]}),c&&s.weights&&e.jsxs("div",{className:"border-t border-border pt-6",children:[e.jsx("h3",{className:"text-lg font-arabic font-semibold mb-3",children:"اختر الوزن"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.weights.map(r=>e.jsxs("button",{onClick:()=>N(r.id),className:`px-4 py-2 rounded-lg border-2 transition-all ${i===r.id?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50"}`,children:[e.jsx("span",{className:"font-medium",children:r.weight}),e.jsxs("span",{className:"text-sm text-muted-foreground mr-2",children:["- ",r.price," د.ج"]})]},r.id))}),!i&&e.jsx("p",{className:"text-sm text-amber-600 mt-2",children:"يرجى اختيار الوزن"})]}),e.jsxs("div",{className:"border-t border-border pt-6",children:[e.jsx("h3",{className:"text-lg font-arabic font-semibold mb-2",children:"الوصف"}),e.jsx("p",{className:"font-body text-muted-foreground leading-relaxed",children:s.description_ar})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-body",children:"الكمية:"}),e.jsxs("div",{className:"flex items-center border border-border rounded-lg",children:[e.jsx("button",{onClick:()=>l(Math.max(1,t-1)),className:"p-3 hover:bg-muted transition-colors",disabled:t<=1,children:e.jsx(C,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-12 text-center font-body",children:t}),e.jsx("button",{onClick:()=>l(t+1),className:"p-3 hover:bg-muted transition-colors",children:e.jsx(B,{className:"w-4 h-4"})})]})]}),e.jsxs(S,{size:"lg",className:"w-full font-body text-lg",onClick:v,disabled:c&&!i,children:[e.jsx(L,{className:"w-5 h-5 ml-2"}),"أضف للسلة"]})]})]})]})})}),h.length>0&&e.jsx("section",{className:"py-12 bg-muted/50",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"text-2xl font-arabic-display font-bold text-secondary mb-6",children:"منتجات مشابهة"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:h.map(r=>{const d={id:r.id,nameAr:r.name_ar,nameFr:r.name_fr,price:r.price,image:r.image||"/placeholder.svg",category:r.category?.name_fr||"",descriptionAr:r.description_ar||"",isNew:r.is_new||!1,isPromo:r.is_promo||!1,isBestSeller:r.is_best_seller||!1,isFeatured:r.is_featured||!1};return e.jsx(F,{product:d},r.id)})})]})})]}),e.jsx(x,{})]})};export{Y as default};
