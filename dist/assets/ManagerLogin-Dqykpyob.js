import{j as e}from"./ui-vendor-CbTtZHsW.js";import{a as s,k as a,L as r}from"./react-vendor-1XlI0agO.js";import{B as t}from"./button-D-ffmNcE.js";import{I as o}from"./input-m9ePOgnC.js";import{L as l}from"./label-Cu_4ZZv9.js";import{a as n,b as i,c as m,C as d}from"./card-PHeom2L9.js";import{s as c}from"./index-BWpasF73.js";import{A as p,C as u}from"./circle-alert-DllWQVoW.js";import{L as h}from"./lock-BqWhWjxK.js";import{P as x}from"./phone-CN7aDeEm.js";import"./query-vendor-DL9dZapS.js";const j=()=>{const[j,f]=s.useState(""),[g,v]=s.useState(""),[b,N]=s.useState(""),[w,y]=s.useState(!1),S=a();return e.jsxs("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-4 relative",children:[e.jsxs(r,{to:"/",className:"absolute top-4 left-4 flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors font-body",children:[e.jsx(p,{className:"w-4 h-4"}),"العودة للموقع"]}),e.jsxs(n,{className:"w-full max-w-md",children:[e.jsxs(i,{className:"text-center pb-2",children:[e.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(h,{className:"w-8 h-8 text-primary"})}),e.jsx(m,{className:"text-2xl font-bold",children:"Manager Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"طاحونة البدر"})]}),e.jsx(d,{children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),N(""),y(!0);try{const{data:e,error:s}=await c.from("managers").select("id, phone, password, name, is_active").eq("phone",j).single();if(s||!e)return N("Invalid phone number or password"),void y(!1);if(!e.is_active)return N("This manager account has been deactivated"),void y(!1);if(e.password!==g)return N("Invalid phone number or password"),void y(!1);localStorage.setItem("manager_id",e.id),localStorage.setItem("manager_name",e.name),localStorage.setItem("manager_phone",e.phone),localStorage.setItem("manager_authenticated","true"),S("/manager")}catch(s){N(s.message||"An error occurred during sign in")}finally{y(!1)}},className:"space-y-4",children:[b&&e.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 text-destructive rounded-lg p-3 flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:b})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(o,{id:"phone",type:"tel",value:j,onChange:e=>f(e.target.value),className:"pl-10",placeholder:"+213 5XX XXX XXX",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(o,{id:"password",type:"password",value:g,onChange:e=>v(e.target.value),className:"pl-10",placeholder:"••••••••",required:!0})]})]}),e.jsx(t,{type:"submit",className:"w-full",disabled:w,children:w?"Signing in...":"Sign In"})]})})]})]})};export{j as default};
