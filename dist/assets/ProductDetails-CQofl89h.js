import{j as e}from"./ui-vendor-CbTtZHsW.js";import{i as s,a as r,L as a}from"./react-vendor-1XlI0agO.js";import{T as i,H as t,F as l,M as n}from"./Footer-DuKL0YBK.js";import{P as d}from"./ProductCard-BkbQSchT.js";import{B as c}from"./button-BaBzPPdN.js";import{a as o,L as m}from"./index-D1_jVxz0.js";import{c as x,d as p}from"./useProducts-C-FzGN4K.js";import{S as h,J as j}from"./JSONLD-CermCIoP.js";import{C as g}from"./chevron-left-B9kvwOhv.js";import{P as f}from"./plus-HqHeUJWv.js";import{S as u}from"./shopping-cart-BkHDRNjK.js";import"./phone-xXJ7ctl3.js";import"./instagram-uTsMO0Ix.js";import"./input-Cyy5VwgS.js";import"./useCategories-DFbTdWoi.js";import"./query-vendor-DL9dZapS.js";import"./trash-2-BNPyHnqR.js";import"./search-B6TsrJyZ.js";import"./menu-dUX_dQan.js";import"./chevron-down-W51QyQCR.js";import"./map-pin-BnIo_9oq.js";import"./mail-CbvneEyM.js";const N=()=>{const{id:N}=s(),{addItem:b}=o(),[y,v]=r.useState(1),[_,w]=r.useState(null),{data:C,isLoading:P}=x(N),{data:F}=p(),S=(F?.data||[]).filter(e=>e.category_id===C?.category_id&&e.id!==N).slice(0,4),k=C?.has_weight_options&&C.weights&&C.weights.length>0,A=k?C.weights?.find(e=>e.id===_):null,L=A?A.price:C?.price||0;if(P)return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(i,{}),e.jsx(t,{}),e.jsx("main",{className:"flex-1 flex items-center justify-center",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-primary"})}),e.jsx(l,{})]});if(!C)return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(i,{}),e.jsx(t,{}),e.jsx("main",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-arabic-display mb-4",children:"المنتج غير موجود"}),e.jsx(a,{to:"/",className:"text-primary hover:underline font-body",children:"العودة للرئيسية"})]})}),e.jsx(l,{})]});return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(h,{title:C.name_ar,description:C.description_ar?.substring(0,160),ogImage:C.image,ogType:"product"}),e.jsx(j,{data:{"@type":"Product",name:C.name_ar,image:C.image,description:C.description_ar,brand:{"@type":"Brand",name:"طاحونة البدر"},offers:{"@type":"Offer",price:L,priceCurrency:"DZD",availability:"https://schema.org/InStock"}}}),e.jsx(i,{}),e.jsx(t,{}),e.jsxs("main",{className:"flex-1",children:[e.jsx("div",{className:"bg-muted/50 py-3",children:e.jsx("div",{className:"container",children:e.jsxs("nav",{className:"flex items-center gap-2 text-sm font-body text-muted-foreground",children:[e.jsx(a,{to:"/",className:"hover:text-primary transition-colors",children:"الرئيسية"}),e.jsx(g,{className:"w-4 h-4"}),C.category&&e.jsxs(e.Fragment,{children:[e.jsx(a,{to:`/category/${C.category_id}`,className:"hover:text-primary transition-colors",children:C.category.name_ar}),e.jsx(g,{className:"w-4 h-4"})]}),e.jsx("span",{className:"text-foreground",children:C.name_ar||""}),"            "]})})}),e.jsx("section",{className:"py-8 md:py-12",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 md:gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-muted",children:e.jsx("img",{src:C.image||"/placeholder.svg",alt:C.name_ar||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[C.is_new&&e.jsx("span",{className:"badge-new",children:"جديد"}),C.is_promo&&e.jsx("span",{className:"badge-promo",children:"عرض خاص"}),C.is_best_seller&&e.jsx("span",{className:"bg-secondary text-secondary-foreground px-3 py-1 text-sm font-medium rounded-full",children:"الأكثر مبيعاً"}),C.is_featured&&e.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 text-sm font-medium rounded-full",children:"منتج مميز"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-arabic-display font-bold text-secondary mb-2",children:C.name_ar||""}),e.jsx("p",{className:"text-lg font-french text-muted-foreground",children:C.name_fr})]}),e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsxs("span",{className:"text-3xl font-bold text-primary",dir:"ltr",children:[L," د.ج"]}),C.original_price&&!A&&e.jsxs("span",{className:"text-xl text-muted-foreground line-through",dir:"ltr",children:[C.original_price," د.ج"]}),e.jsxs("span",{className:"text-muted-foreground",children:["/ ",A?.weight]})]}),k&&C.weights&&e.jsxs("div",{className:"border-t border-border pt-6",children:[e.jsx("h3",{className:"text-lg font-arabic font-semibold mb-3",children:"اختر الوزن"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.weights.map(s=>e.jsxs("button",{onClick:()=>w(s.id),className:"px-4 py-2 rounded-lg border-2 transition-all "+(_===s.id?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50"),children:[e.jsx("span",{className:"font-medium",children:s.weight}),e.jsxs("span",{className:"text-sm text-muted-foreground mr-2",children:["- ",s.price," د.ج"]})]},s.id))}),!_&&e.jsx("p",{className:"text-sm text-amber-600 mt-2",children:"يرجى اختيار الوزن"})]}),e.jsxs("div",{className:"border-t border-border pt-6",children:[e.jsx("h3",{className:"text-lg font-arabic font-semibold mb-2",children:"الوصف"}),e.jsx("p",{className:"font-body text-muted-foreground leading-relaxed",children:C.description_ar})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-body",children:"الكمية:"}),e.jsxs("div",{className:"flex items-center border border-border rounded-lg",children:[e.jsx("button",{onClick:()=>v(Math.max(1,y-1)),className:"p-3 hover:bg-muted transition-colors",disabled:y<=1,children:e.jsx(n,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-12 text-center font-body",children:y}),e.jsx("button",{onClick:()=>v(y+1),className:"p-3 hover:bg-muted transition-colors",children:e.jsx(f,{className:"w-4 h-4"})})]})]}),e.jsxs(c,{size:"lg",className:"w-full font-body text-lg",onClick:()=>{const e={id:C.id,nameAr:C.name_ar||"",nameFr:C.name_fr,price:L,originalPrice:C.original_price||void 0,image:C.image||"/placeholder.svg",category:C.category?.name_fr||"",descriptionAr:C.description_ar||"",isNew:C.is_new||!1,isPromo:C.is_promo||!1,isBestSeller:C.is_best_seller||!1,isFeatured:C.is_featured||!1},s=A?{id:A.id,weight:A.weight,price:A.price}:void 0;b(e,y,s),v(1)},disabled:k&&!_,children:[e.jsx(u,{className:"w-5 h-5 ml-2"}),"أضف للسلة"]})]})]})]})})}),S.length>0&&e.jsx("section",{className:"py-12 bg-muted/50",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"text-2xl font-arabic-display font-bold text-secondary mb-6",children:"منتجات مشابهة"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:S.map(s=>{const r={id:s.id,nameAr:s.name_ar,nameFr:s.name_fr,price:s.price,image:s.image||"/placeholder.svg",category:s.category?.name_fr||"",descriptionAr:s.description_ar||"",isNew:s.is_new||!1,isPromo:s.is_promo||!1,isBestSeller:s.is_best_seller||!1,isFeatured:s.is_featured||!1};return e.jsx(d,{product:r},s.id)})})]})})]}),e.jsx(l,{})]})};export{N as default};
