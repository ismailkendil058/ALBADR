import{u as y,a as n}from"./useMutation-CjuJ8xHN.js";import{n as l,s as a}from"./index-CzubCIAQ.js";function M(){const r=l(),{data:c,isLoading:u,error:i}=y({queryKey:["contact-messages"],queryFn:async()=>{const{data:s,error:e}=await a.from("contact_messages").select("*").order("created_at",{ascending:!1});if(e)throw new Error(e.message);return s||[]}}),m=n({mutationFn:async s=>{const{data:e,error:t}=await a.from("contact_messages").insert(s).select().single();if(t)throw new Error(t.message);return e},onSuccess:()=>{r.invalidateQueries({queryKey:["contact-messages"]})}}),g=n({mutationFn:async({id:s,updatedFields:e})=>{const{data:t,error:o}=await a.from("contact_messages").update(e).eq("id",s).select().single();if(o)throw new Error(o.message);return t},onSuccess:()=>{r.invalidateQueries({queryKey:["contact-messages"]})}}),d=n({mutationFn:async s=>{const{error:e}=await a.from("contact_messages").delete().eq("id",s);if(e)throw new Error(e.message)},onSuccess:()=>{r.invalidateQueries({queryKey:["contact-messages"]})}});return{messages:c,isLoading:u,error:i,sendMessage:m.mutateAsync,updateMessage:g.mutateAsync,deleteMessage:d.mutateAsync}}export{M as u};
