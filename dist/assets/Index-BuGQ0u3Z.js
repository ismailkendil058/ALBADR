const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FeaturesBar-CnFKnQNI.js","assets/ui-vendor-CbTtZHsW.js","assets/react-vendor-1XlI0agO.js","assets/truck-B8PAd3Dr.js","assets/index-BWpasF73.js","assets/query-vendor-DL9dZapS.js","assets/index-DO52WnPG.css","assets/shield-B32wjMJe.js","assets/clock-CZrvo9qj.js","assets/ProductSection-DA0z1wki.js","assets/button-D-ffmNcE.js","assets/ProductCard-izrUIa5I.js","assets/chevron-left-CZa2LEKQ.js"])))=>i.map(i=>d[i]);
import{u as e,L as s,_ as t}from"./index-BWpasF73.js";import{j as a}from"./ui-vendor-CbTtZHsW.js";import{a as r,L as l}from"./react-vendor-1XlI0agO.js";import{T as i,H as n,F as o}from"./Footer-Byqae03W.js";import{B as c}from"./button-D-ffmNcE.js";import{C as d}from"./chevron-left-CZa2LEKQ.js";import{C as m}from"./chevron-right-DqnxfF0a.js";import{u as x}from"./useCategories-CVN9Txt_.js";import{C as p}from"./card-PHeom2L9.js";import{u as h,a as u,b as g}from"./useProducts-Dd0Ob86o.js";import{S as j,J as f}from"./JSONLD-C3jNwzkD.js";import"./query-vendor-DL9dZapS.js";import"./phone-CN7aDeEm.js";import"./instagram-DzHnDay_.js";import"./input-m9ePOgnC.js";import"./trash-2-B78Q9GXL.js";import"./plus-CCAUwyXe.js";import"./search-BmT2NVnk.js";import"./shopping-cart-D1jdCj2s.js";import"./menu-CfYcmfj3.js";import"./chevron-down-B5LJPQC6.js";import"./map-pin-FfxozQRU.js";import"./mail-Bi5-Lunt.js";const b=({heroImages:e=[]})=>(r.useEffect(()=>(e.slice(0,2).forEach(e=>{if(!e)return;const s=document.createElement("link");s.rel="preload",s.as="image",s.href=e,document.head.appendChild(s)}),()=>{document.head.querySelectorAll('link[rel="preload"][as="image"]').forEach(s=>{e.includes(s.getAttribute("href")||"")&&s.remove()})}),[e]),null),y=()=>{const{content:s,loading:t}=e(),[i,n]=r.useState(0),[o,x]=r.useState([]);r.useEffect(()=>{const e=(s.hero.slides||[]).filter(e=>e.isActive).sort((e,s)=>e.order-s.order);x(e)},[s.hero.slides]);const p=r.useCallback(()=>{0!==o.length&&n(e=>(e+1)%o.length)},[o.length]),h=r.useCallback(()=>{0!==o.length&&n(e=>(e-1+o.length)%o.length)},[o.length]);r.useEffect(()=>{if(o.length<=1)return;const e=s.hero.autoPlayInterval||5e3,t=setInterval(()=>{p()},e);return()=>clearInterval(t)},[p,o.length,s.hero.autoPlayInterval]);const u=r.useMemo(()=>0===o.length?[]:[o[i]?.image,o[(i+1)%o.length]?.image].filter(Boolean),[o,i]);return t?a.jsx("div",{className:"w-full h-[300px] md:h-[400px] lg:h-[500px] bg-muted animate-pulse"}):0===o.length?null:a.jsxs(a.Fragment,{children:[a.jsx(b,{heroImages:u}),a.jsxs("section",{className:"relative w-full h-[300px] md:h-[400px] lg:h-[500px] overflow-hidden",children:[o.map((e,s)=>a.jsxs("div",{className:"absolute inset-0 transition-opacity duration-700 "+(s===i?"opacity-100":"opacity-0 pointer-events-none"),children:[s===i||s===(i+1)%o.length?a.jsx("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover",loading:s===i?"eager":"lazy",decoding:s===i?"sync":"async",fetchpriority:s===i?"high":"low"}):a.jsx("div",{className:"w-full h-full bg-muted"}),a.jsxs("div",{className:"absolute inset-0 bg-black/40 flex flex-col items-center justify-center text-center p-4",children:[a.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-4 dir-rtl",style:{direction:"rtl"},children:e.title}),a.jsx(l,{to:e.ctaLink,children:a.jsx(c,{size:"lg",className:"bg-primary hover:bg-primary/90 text-white text-lg px-8 py-3",children:e.ctaText})})]})]},e.id)),o.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:h,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 text-white p-2 rounded-full backdrop-blur-sm transition-all z-10","aria-label":"Previous slide",children:a.jsx(d,{className:"w-6 h-6"})}),a.jsx("button",{onClick:p,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 text-white p-2 rounded-full backdrop-blur-sm transition-all z-10","aria-label":"Next slide",children:a.jsx(m,{className:"w-6 h-6"})}),a.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:o.map((e,s)=>a.jsx("button",{onClick:()=>n(s),className:"w-2.5 h-2.5 rounded-full transition-all "+(s===i?"bg-primary w-8":"bg-white/50 hover:bg-white/80"),"aria-label":`Go to slide ${s+1}`},s))})]})]})]})},v=()=>{const{categories:e,isLoading:t,error:r}=x();return t?a.jsx("section",{className:"py-12 md:py-16 bg-background flex items-center justify-center",children:a.jsx(s,{className:"w-8 h-8 animate-spin text-primary"})}):r?a.jsx("section",{className:"py-12 md:py-16 bg-background flex items-center justify-center",children:a.jsx(p,{children:a.jsxs("p",{className:"text-destructive font-body",children:["Error loading categories: ",r.message]})})}):e&&0!==e.length?a.jsx("section",{className:"py-12 md:py-16 bg-background",children:a.jsxs("div",{className:"container",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{className:"section-title",children:"الأقسام"}),a.jsx("p",{className:"section-subtitle font-french",children:"Découvrez nos catégories"})]}),a.jsx("div",{className:"flex flex-nowrap md:flex-wrap justify-start md:justify-center gap-4 md:gap-6 overflow-x-auto md:overflow-x-visible pb-4 md:pb-0 scrollbar-hide snap-x snap-mandatory px-4 md:px-0 -mx-4 md:mx-0",children:e.map((e,s)=>a.jsxs(l,{to:`/category/${e.id}`,className:"category-card group aspect-square flex-shrink-0 w-[160px] md:w-[calc(33.333%-16px)] lg:w-[calc(20%-20px)] md:flex-shrink md:min-w-[180px] max-w-[240px] snap-center "+(e.is_special?"ring-2 ring-primary ring-offset-2":""),children:[a.jsx("img",{src:e.image||"/placeholder.svg",alt:e.name_ar,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:s<5?"eager":"lazy",decoding:"async"}),a.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center text-center p-4",children:[e.is_special&&a.jsx("span",{className:"badge-promo mb-2 text-xs",children:"عرض خاص"}),a.jsx("h3",{className:"text-xl md:text-2xl font-arabic-display font-bold text-primary-foreground",children:e.name_ar}),a.jsx("p",{className:"text-sm font-french text-primary-foreground/80 mt-1",children:e.name_fr})]})]},e.id))})]})}):a.jsx("section",{className:"py-12 md:py-16 bg-background flex items-center justify-center",children:a.jsx(p,{children:a.jsx("p",{className:"text-muted-foreground font-body",children:"No categories available"})})})},N=r.lazy(()=>t(()=>import("./FeaturesBar-CnFKnQNI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),w=r.lazy(()=>t(()=>import("./ProductSection-DA0z1wki.js"),__vite__mapDeps([9,1,2,10,4,5,6,11,12]))),k=()=>a.jsx("div",{className:"py-12 md:py-16 flex items-center justify-center",children:a.jsx(s,{className:"w-8 h-8 animate-spin text-primary"})}),_=()=>{const{data:e,isLoading:s,error:t}=h(),{data:l,isLoading:c,error:d}=u(),{data:m,isLoading:x,error:b}=g(),_=t||d||b;return _?a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center",children:a.jsx(p,{children:a.jsxs("p",{className:"text-destructive font-body",children:["خطأ أثناء تحميل المنتجات: ",_.message]})})}):a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(j,{description:"طاحونة البدر - أفضل التوابل والأعشاب الطبيعية بجودة عالية من الجزائر. اكتشف عالمًا من النكهات الأصيلة.",canonical:"/"}),a.jsx(f,{data:{"@type":"LocalBusiness",name:"طاحونة البدر",image:"/Al Badr Logo HQ Transparent.png",address:{"@type":"PostalAddress",addressLocality:"Laghouat",addressCountry:"DZ"},priceRange:"$$"}}),a.jsx(i,{}),a.jsx(n,{}),a.jsxs("main",{className:"flex-1",children:[a.jsx(y,{}),a.jsx(r.Suspense,{fallback:a.jsx(k,{}),children:a.jsx(N,{})}),a.jsx(v,{}),e&&e.length>0&&a.jsx(r.Suspense,{fallback:a.jsx(k,{}),children:a.jsx(w,{titleAr:"منتجات مميزة",titleFr:"Produits en Vedette",products:e,bgClass:"bg-muted/50",sectionKey:"featured"})}),l&&l.length>0&&a.jsx(r.Suspense,{fallback:a.jsx(k,{}),children:a.jsx(w,{titleAr:"الأكثر مبيعاً",titleFr:"Meilleures Ventes",products:l,sectionKey:"bestsellers"})}),m&&m.length>0&&a.jsx(r.Suspense,{fallback:a.jsx(k,{}),children:a.jsx(w,{titleAr:"عروض خاصة",titleFr:"Promotions Spéciales",products:m,bgClass:"bg-primary/5",sectionKey:"promo"})})]}),a.jsx(o,{})]})};export{_ as default};
