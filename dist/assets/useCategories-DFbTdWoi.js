import{u as e,b as r,c as t}from"./query-vendor-DL9dZapS.js";import{s as a}from"./index-D1_jVxz0.js";async function s(){const{data:e,error:r}=await a.from("categories").select("*, products(count)").order("created_at",{ascending:!0});if(r)throw new Error(r.message);return e||[]}function o(){const o=e(),{data:i,isLoading:n,error:c}=r({queryKey:["categories"],queryFn:s,staleTime:6e5,gcTime:12e5}),u=t({mutationFn:async e=>{const{data:r,error:t}=await a.from("categories").insert(e).select().single();if(t)throw new Error(t.message);return r},onSuccess:()=>{o.invalidateQueries({queryKey:["categories"]})}}),d=t({mutationFn:async({id:e,updatedFields:r})=>{const{data:t,error:s}=await a.from("categories").update(r).eq("id",e).select().single();if(s)throw new Error(s.message);return t},onSuccess:()=>{o.invalidateQueries({queryKey:["categories"]})}}),g=t({mutationFn:async e=>{const{error:r}=await a.from("categories").delete().eq("id",e);if(r)throw new Error(r.message)},onSuccess:()=>{o.invalidateQueries({queryKey:["categories"]})}});return{categories:i,isLoading:n,error:c,addCategory:u.mutateAsync,updateCategory:d.mutateAsync,deleteCategory:g.mutateAsync}}export{o as u};
